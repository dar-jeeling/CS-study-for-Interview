
> 전화 한 통만 하면 필요한 논문을 복사해 주는 곳이 있다. 그리고 그곳의 단골손님 영수가 있다. 그런데 이 녀석은 매번 똑같은 매우 매우 긴 이름을 가진 논문의 일부분을 복사해 달라고 한다. 
> 
> 이 녀석은 보통 이런 식으로 하루에도 여러 번 주문을 한다. 설상가상으로 말하는 속도도 느린 편이다.
> 그래서 아저씨가 말씀하시길 “그 논문은 이제부터 너의 18번이다! 그냥 저의 18번 논문 26쪽부터 30쪽까지 복사해 주세요 라고 해라!”
> 
> 영수는 그 이후로도 최소 50자가 넘는 제목의 논문만 복사 주문을 한다. 그 때 마다 아저씨는 논문에 새로운 번호를 할당해 준다(중복되지 않는). 그래야 영수와의 대화 속에서 스트레스를 덜 받을 수 있기 때문이다.

파일 디스크립터(이하 FD)는 유닉스 계열 운영체제에서 **프로세스가 파일에 접근하기 위해 사용하는 추상적 개념**이다. 0 에서 시작하는 양수 정수이며 프로세스가 **파일에 대한 참조를 유지**하는데 사용한다.

프로세스가 파일을 열면 운영체제는 파일에 대한 새 fd를 할당한다. fd는 프로세스의 fd 테이블(**File Descriptor Table**)에 저장되는데, 이 테이블은 fd와 파일에 대한 포인터 맵이다. 

![](https://i.imgur.com/8JBPJfv.png)

프로세스가 "`파일 열기`"를 요청한다면 커널은
1. 액세스 권한 부여
2. 전역 파일 테이블에 항목 생성
3. 해당 항목을 가리키는 FD를 반환

해당 항목에는 파일의 inode, 바이트 오프셋 및 해당 데이터 스트림에 대한 액세스 권한등의 정보가 포함된다. FD 테이블과 파일 테이블은 직접 수정할 수 없으며 커널을 통해서만 수정해야한다.

FD는 추상적 개념으로 실제 파일과는 별개임을 유의해야한다. 그저 파일에 액세스하는 데 사용하는 방법!!

### 표준 입출력, 표준 오류의 FD

프로그램이 프로세스로 메모리에서 실행을 시작 할 때, 기본적으로 할당되는 FD가 있다.
처음 3개의 FD (0~2)는 기본적으로 아래와 같이 설정되어지며 파일을 열거나 소켓을 생성할 때에는 3번부터 새로 할당해준다.
- `0` : 표준 입력 (stdin)
- `1` : 표준 출력 (stdout)
- `2` : 표준 오류 (stderr)
