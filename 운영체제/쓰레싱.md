
![](https://i.imgur.com/nJSPpFK.png)

프로세스가 원할하게 수행되기 위해서는 일정 수준 이상의 페이지 프레임을 물리적 메모리에 할당받아야한다. 그렇지 못하는 경우 Thrashing이 발생한다.

트래싱은 운영 체제의 메모리 관리 장애이다. Thrashing 상태에서는 프로세스가 **메모리를 할당하고 해제하는 데 너무 많은 시간을 소비하여 실제로 작업을 수행할 시간이 없는 상태**이다.

### Why?
- CPU 이용률이 떨어질 때 새로운 프로세스를 추가하여 멀티 프로그래밍의 정도 (degree)를 높이려 하기 때문
- 다중 프로그래밍의 정도(**MPD**)란 ➡️ **메모리가 동시에 올라가 있는 프로세스의 수**

메모리가 부족한 경우 페이지 교체가 필요하지만 이미 활발하게 사용되는 페이지들로 구성되어있으므로 메모리 영역에 접근하게 될 때 메모리에 Page falut률이 높아지며, Swap in과 Swap out을 반복하게 된다.

결과적으로 바로바로 page falut가 발생하며 프로세스의 실행보다 페이징을 위해 더 많은 시간을 소요하게 되는 것. 결국 대부분에 시간에 일을 하지 않고 교체나 하고 앉아있는 상태

### How To Prevent?
- 각 프로세스가 필요로 하는 최소한의 프레임 갯수를 보장
- MPD를 적절하게 조절한다.
	- working set 알고리즘
	- page falut frquency 알고리즘

### Workingset Algorithm
지역성 = Locality (프로세스가 일정 시간동안 집중적으로 특정 주소영역을 참조하는 경향) 을 활용하여, **지역성 집합이 메모리에 동시에 올라갈 수 있도록  보장**하는 메모리 관리 알고리즘

![](https://i.imgur.com/ni3qNo5.png)

#### *Workingset* 
: 한번에 메모리에 올라가야하는 페이지의 집합

한 번에 올라갈 수 있는 공간이 존재할 때에만 동작하고, 그렇지 않은 경우 기존 메모리에 존재하는 페이지를 swap out 시켜 공간을 확보한다.

워킹셋을 결정하기 위해 workingset window를 사용하는데 그 크기를 `Δdelta`라고 한다. (**[Δ-t, t]** 사이에 참조된 페이지들의 집합으로 결정) 이 크기는 메모리 상태에 따라 동적으로 조절한다.

### Page Fault Frequency Algorithm
fage falut 발생률을 주기적으로 조사하여 각 프로세스에 할당할 메모리 양을 동적으로 조정하는 알고리즘

![](https://i.imgur.com/ongwTpV.png)

시스템이 미리 정해 놓은 상한 값과 하한값에 따라 메모리에 올라가 있는 프로세스의 수를 조절한다.
