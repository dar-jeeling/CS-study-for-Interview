
- [[#바드가 말하길...|바드가 말하길...]]
- [[#HTTP로는 실시간 통신을 할 수 없다|HTTP로는 실시간 통신을 할 수 없다]]
- [[#웹소켓은 실시간 통신을 할 수 있다|웹소켓은 실시간 통신을 할 수 있다]]
- [[#웹소켓 한계|웹소켓 한계]]
	- [[#웹소켓 한계#1. Socket.io, SockJS|1. Socket.io, SockJS]]
	- [[#웹소켓 한계#2. STOMP|2. STOMP]]
- [[#웹 소켓 이전의 비슷한 기술|웹 소켓 이전의 비슷한 기술]]
- [[#http는 왜 단방향 통신인가|http는 왜 단방향 통신인가]]

## Bard가 말하길...

웹소켓과 소켓 통신은 모두 네트워크에서 두 개의 프로그램 간에 데이터를 주고받는 데 사용되는 기술입니다. 그러나 두 기술에는 몇 가지 중요한 차이점이 있습니다.

웹소켓은 HTTP 프로토콜을 기반으로 하는 양방향 통신 프로토콜입니다. 즉, 서버와 클라이언트가 모두 데이터를 주고받을 수 있습니다. 소켓 통신은 TCP/IP 프로토콜을 기반으로 하는 단방향 통신 프로토콜입니다. 즉, 서버는 클라이언트에게 데이터를 보낼 수 있지만 클라이언트는 서버에게 데이터를 보낼 수 없습니다.

웹소켓은 소켓 통신보다 설정하기 쉽고 사용하기 쉽습니다. 또한 웹소켓은 소켓 통신보다 더 많은 기능을 제공합니다. 예를 들어, 웹소켓은 실시간 통신을 지원하고, 소켓 통신은 실시간 통신을 지원하지 않습니다.

웹소켓은 소켓 통신보다 더 일반적으로 사용되는 기술입니다. 웹소켓은 실시간 통신이 필요한 애플리케이션에서 자주 사용됩니다. 예를 들어, 웹소켓은 채팅 애플리케이션, 게임 애플리케이션, 스트리밍 애플리케이션에서 자주 사용됩니다.

소켓 통신은 웹소켓보다 덜 일반적으로 사용되는 기술입니다. 소켓 통신은 실시간 통신이 필요하지 않은 애플리케이션에서 자주 사용됩니다. 예를 들어, 소켓 통신은 파일 전송 애플리케이션, 데이터베이스 애플리케이션에서 자주 사용됩니다.

웹소켓과 소켓 통신은 모두 네트워크에서 두 개의 프로그램 간에 데이터를 주고받는 데 사용되는 유용한 기술입니다. 그러나 두 기술에는 몇 가지 중요한 차이점이 있습니다. 웹소켓은 소켓 통신보다 설정하기 쉽고 사용하기 쉽고 더 많은 기능을 제공합니다. 웹소켓은 소켓 통신보다 더 일반적으로 사용되는 기술입니다.


# TCP/IP소켓과 웹소켓의 차이

일단 소켓과 웹소켓은 **IP와 포트를 통한 통신**을 한다는 점에서는 **비슷하다.** 또, 둘 다 양방향 통신을 한다는 비슷한 특징을 갖고 있기도 하다.

차이점은,  
**웹 소켓은 HTTP 레이어에서 작동하는 소켓으로 TCP/IP 소켓의 레이어가 다르다!**  
그러니 두 개념은 엄연히 다르다. 같다고 혼동하지 않아야한다

# WebSocket

웹소켓은 http에서 실시간 통신을 할 수 없다는 문제를 해결하기 위해 나온 기술이다! 웹소켓의 탄생 배경이 되는, http의 특징에 대해 간략히 살펴보자.

## HTTP로는 실시간 통신을 할 수 없다

웹소켓의 탄생배경을 알기 위해선 http의 특징에 대해 짚고 넘어가야한다.

- 비연결성 (단방향)
- 매번 연결 **맺고 끊는** 과정의 비용
- **request-response** 의 구조
- 헤더의 비중이 너무 큼 → 실시간성으로 많은 데이터를 주고 받고자 하는 경우에는 매우 부담이 되는 요소 중 하나

http는 위와 같은 특징을 같고 있기 때문이다. 즉, 요청을 보내면 응답이 오는 **단방향적 구조로 통신**하기 때문에 TCP/IP 프로토콜을 사용하는 소켓처럼 계속 connection이 유지되는 **실시간 통신을 할 수 없다.** 이의 문제점을 해결하기 위해 나온것이 웹소켓 프로토콜이다.

## 웹소켓은 실시간 통신을 할 수 있다

- 연결지향 (양방향)
- 한 번 **연결 맺은 뒤 유지**
- 핸드쉐이크 과정에서는 헤더의 비중이 크지만, 한번 연결이 되면 간단한 메시지들만 오고감 → 굉장히 경제적임

웹소켓은 위와 같은 특징으로 실시간 통신을 할 수 있다. 웹소켓은 http를 대체할 수 있는 개념까진 아니고, 그저 **웹에서 실시간 통신을 해야하는 상황에서 잘 쓰이는 프로토콜 중 하나**라고 생각하면 된다. 위에서 언급했지만 이름부터 웹소켓이기에 http 레이어 위에서 작동한다.

## 웹소켓 한계

웹소켓은 html5 이후에 나왔다. 
html5이전 기술로 구현된 서비스에서는 어떻게 해야할까?

### 1. Socket.io, SockJS

Socket.io, SockerJS가 html5이전의 기술로 구현된 서비스에서 웹 소켓처럼 사용할 수 있도록 도와주는 기술임. 이걸로 실시간 통신을 도와준다.

결국 브라우저와 웹서버의 종류와 버전을 파악하여 가장 적합한 기술을 선택해 웹소켓처럼 보여지게 기능을 만든다!

### 2. STOMP

웹소켓은 문자열들을 주고받을 수 있게 해줄 뿐 그 이상의 일은 하지 않는다. 주고 받는 문자열의 해독은 온전히 어플리케이션에 맡긴다

HTTP는 형식을 정해두었기 때문에 모두가 약속을 따르기만 하면 해석할 수 있다. 하지만 WebSocket방식은 sub-protocols을 사용해서 주고 받는 메시지의 형태를 약속하는 경우가 많음

sub-protocol로 자주 쓰이는게 STOMP

## 웹 소켓 이전의 비슷한 기술

http로도 실시간 통신을 하기 위한 다양한 방법이 존재한다.
1. http polling
2. http streaming 등등

##  http는 왜 단방향 통신인가

TCP 서버 구성을 할때 소켓을 이용해 실시간 통신을 하는데 왜 http 프로토콜을 얹으면 단방향적 구조로 통신하게 되는거지? **http는 connectionless하고 tcp는 connection oriented한데 어떻게 tcp위에 http가 있을 수 있는가?**

일단 http는 tcp 위에서 만들어진다. 즉 소켓을 양끝단으로 하는 tcp 레이어 위에 존재하는 프로토콜이다. 아무리 'http vs socket'에 관하여 설명하는 글이 많다 할지라도 http가 tcp 위에 만들어졌으니 HTTP 또한 소켓 통신을 활용한 방식이라고 볼 수 있지 않느냐에 대한 물음에 대한 답은 '그렇다'일것 이다.

하지만 통신에는 계층이 있다. http와 소켓은 다른 프로토콜을 가지고 있고, 엄연히 다른 계층에서 동작한다. 일반적으로 사용하는 소켓통신(tcp통신)은 4계층에서 시작하여 패킷이 생성되고, http 통신의 경우 7계층에서부터 시작하여 패킷이 생성된다.

따라서 **4계층 관점으로 본다면 이 둘은 연결지향적 통신이 되는 것이고,  
7계층 관점에서 본다면 http는 비연결, socket 통신은 연결지향적이 되는 것**이다.